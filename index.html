<!DOCTYPE hmtl>
<html lang="en">
	<head>
        <title>JavaScript Grocery</title>
		<meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="style.css" />
	</head>
<body>
	<div class="col"></div>
	<div class="col well" id="grocery">
		<h3 class="text-primary">JavaScript My Grocery</h3>
		<hr style="border-top:1px dotted #ccc;"/>
		<div class="col">
			<form>
				<div class="form-group">
					<label>Item</label>
					<input type="text" id="item" class="form-control" />
				</div>

				<div class="form-group">
					<label>Quantity</label>
					<input type="text" id="quantity" class="form-control" />
				</div>

				<div class="form-group">
					<label>Price</label>
					<input type="text" id="price" class="form-control" />
				</div>
			</form>

            <div class="container d-flex justify-content-center"> 
                <button type="button" class="btn btn-success " onclick="addData();">Add Item</button>
            </div>
           
		</div>
        <br>

		<div class="col">
			<table id="table" class="table">
				<thead class="alert-info">
					<tr>
						<th>Item</th>
						<th>Quantity</th>
						<th>Price</th>
                        <th>Action</th>
					</tr>
				</thead>
				<tbody id="result"></tbody>
			</table>
            <span id="total"></span>
		</div>
    
    
	</div>
       
            <script>
                getTotal();
                function addData(){
                        var item = document.getElementById('item').value;
                        var quantity = document.getElementById('quantity').value;
                        var price = document.getElementById('price').value;
                        
                    
                        if(item == "" || quantity == "" || price == ""){
                            alert("Incomplete Data!");
                        }else{
                            var html=" ";
                            alert("Added Item!");
                    
                            html = "<tr><td>" + item + "</td><td>" + quantity + "</td><td>" + price + "</td> <td><button class='btn btn-danger remove'>Delete</button></td></tr>" ;
                            
                            
                            document.getElementById('result').innerHTML += html;
                    
                            document.getElementById('item').value="";
                            document.getElementById('quantity').value="";
                            document.getElementById('price').value="";
                            getTotal();
                            addListener();
                        }                         
                }


                                    
                                function getTotal(){
                                    var table = document.getElementById("table");
                                    var sumVal = 0;

                                    for(var i = 1; i < table.rows.length; i++)
                                    { 
                                        sumVal = sumVal + parseFloat(table.rows[i].cells[2].innerHTML);
                                    }

                                    document.getElementById("total").innerHTML = "Total: " + sumVal;
                                                                     
                                }

                             


                                    function addListener(){
                                    var remove= document.querySelectorAll(".remove");

                                    console.log(remove); 

                                    for(var index of remove){
                                        index.addEventListener('click',function(e) {
                                            var tgt= e.target;
                                            tgt.closest("tr").remove();
                                            getTotal();
                                            alert("Item is removed")
                                        });

                                    }
                                    
                                }
                                        
                                         
            </script>	

      

        
</body>	
</html>